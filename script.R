library(dplyr)
library(GEOquery)

asd <- c('GSM1033106', 'GSM1033107', 'GSM1033108', 'GSM1033109', 'GSM1033110', 'GSM1033111', 'GSM1033112', 'GSM1033113', 'GSM1033114', 'GSM1033115', 'GSM1033116', 'GSM1033117', 'GSM1033118', 'GSM1033119', 'GSM1033120', 'GSM1033121', 'GSM1033122', 'GSM1033123', 'GSM1033124', 'GSM1033125', 'GSM1033126', 'GSM1033127', 'GSM1033128', 'GSM1033129', 'GSM1033130', 'GSM1033131', 'GSM1033132', 'GSM1033133', 'GSM1033134', 'GSM1033135', 'GSM1033136', 'GSM1033137', 'GSM1033138', 'GSM1033139', 'GSM1033140', 'GSM1033141', 'GSM1033142', 'GSM1033143', 'GSM1033144', 'GSM1033145', 'GSM1033146', 'GSM1033147', 'GSM1033148', 'GSM1033149', 'GSM1033150', 'GSM1033152', 'GSM1033153', 'GSM1033154', 'GSM1033155', 'GSM1033156', 'GSM1033157', 'GSM1033158', 'GSM1033159', 'GSM1033160', 'GSM1033161', 'GSM1033162', 'GSM1033163', 'GSM1033164', 'GSM1033165', 'GSM1033166', 'GSM1033167', 'GSM1033168', 'GSM1033169', 'GSM1033170', 'GSM1033171', 'GSM1033172', 'GSM1033173', 'GSM1033174', 'GSM1033175', 'GSM1033176', 'GSM1033177', 'GSM1033178', 'GSM1033179', 'GSM1033180', 'GSM1033181', 'GSM1033182', 'GSM1033183', 'GSM1033184', 'GSM1033185', 'GSM1033186', 'GSM1033187', 'GSM1033188', 'GSM1033189', 'GSM1033190', 'GSM1033191', 'GSM1033192', 'GSM1033193', 'GSM1033194', 'GSM1033195', 'GSM1033196', 'GSM1033197', 'GSM1033198', 'GSM1033199', 'GSM1033200', 'GSM1033201', 'GSM1033202', 'GSM1033203', 'GSM1033204', 'GSM1033205', 'GSM1033206', 'GSM1033207', 'GSM1033208', 'GSM1033209', 'GSM1033211', 'GSM1033212', 'GSM1033213', 'GSM1033214', 'GSM1033215', 'GSM1033216', 'GSM1033217', 'GSM1033218', 'GSM1033219', 'GSM1033220', 'GSM1033221', 'GSM1033222', 'GSM1033223', 'GSM1033224', 'GSM1033225', 'GSM1033227', 'GSM1033228', 'GSM1033229', 'GSM1033230', 'GSM1033231', 'GSM1033232', 'GSM1033233', 'GSM1033234', 'GSM1033235', 'GSM1033236', 'GSM1033237', 'GSM1033238', 'GSM1033239', 'GSM1033240', 'GSM1033241', 'GSM1033242', 'GSM1033243', 'GSM1033244', 'GSM1033245', 'GSM1033246', 'GSM1033247', 'GSM1033248', 'GSM1033249', 'GSM1033250', 'GSM1033251', 'GSM1033253', 'GSM1033254', 'GSM1033255')
control <- c('GSM3024679', 'GSM3024680', 'GSM3024681', 'GSM3024682', 'GSM3024683', 'GSM3024684', 'GSM3024685', 'GSM3024686', 'GSM3024687', 'GSM3024688', 'GSM3024689', 'GSM3024690', 'GSM3024691', 'GSM3024692', 'GSM3024693', 'GSM3024694', 'GSM3024695', 'GSM3024696', 'GSM3024697', 'GSM3024698', 'GSM3024699', 'GSM3024700', 'GSM3024701', 'GSM3024702', 'GSM3024703', 'GSM3024704', 'GSM3024705', 'GSM3024706', 'GSM3024707', 'GSM3024708', 'GSM3024709', 'GSM3024710', 'GSM3024711', 'GSM3024712', 'GSM3024713', 'GSM3024714', 'GSM3024715', 'GSM3024716', 'GSM3024717', 'GSM3024718', 'GSM3024719', 'GSM3024720', 'GSM3024721', 'GSM3024722', 'GSM3024723', 'GSM3024724', 'GSM3024725', 'GSM3024726', 'GSM3024727', 'GSM3024728', 'GSM3024729', 'GSM3024730', 'GSM3024731', 'GSM3024732', 'GSM3024733', 'GSM3024734', 'GSM3024735', 'GSM3024736', 'GSM3024737', 'GSM3024738', 'GSM3024739', 'GSM3024740', 'GSM3024741', 'GSM3024742', 'GSM3024743', 'GSM3024744', 'GSM3024745', 'GSM3024746', 'GSM3024747', 'GSM3024748', 'GSM3024749', 'GSM3024750', 'GSM3024751', 'GSM3024752', 'GSM3024753', 'GSM3024754', 'GSM3024755', 'GSM3024756', 'GSM3024757', 'GSM3024758', 'GSM3024759', 'GSM3024760', 'GSM3024761', 'GSM3024762', 'GSM3024763', 'GSM3024764', 'GSM3024765', 'GSM3024766', 'GSM3024767', 'GSM3024768', 'GSM3024769', 'GSM3024770', 'GSM3024771', 'GSM3024772', 'GSM3024773', 'GSM3024774', 'GSM3024775', 'GSM3024776', 'GSM3024777', 'GSM3024778', 'GSM3024779', 'GSM3024780', 'GSM3024781', 'GSM3024782', 'GSM3024783', 'GSM3024784', 'GSM3024785', 'GSM3024786', 'GSM3024787', 'GSM3024788', 'GSM3024789', 'GSM3024790', 'GSM3024791', 'GSM3024792', 'GSM3024793', 'GSM3024794', 'GSM3024795', 'GSM3024796', 'GSM3024797', 'GSM3024798', 'GSM3024799', 'GSM3024800', 'GSM3024801', 'GSM3024802', 'GSM3024803', 'GSM3024804', 'GSM3024805', 'GSM3024806', 'GSM3024807', 'GSM3024808', 'GSM3024809', 'GSM3024810', 'GSM3024811', 'GSM3024812', 'GSM3024813', 'GSM3024814', 'GSM3024815', 'GSM3024816', 'GSM3024817', 'GSM3024818', 'GSM3024819')

val <- 1
new <- NULL
for (i in asd) {
  flag <- TRUE
  if (val == 1) {
    data <- getGEO("GSM1033105")
    files <- Table(data)
    dats <- getGEO(i)
    file <- Table(dats)
    file1 <- select(file, -ID_REF)
    new <- cbind(files, file1)
    print("Yes")
  } else {
    tryCatch({
      data <- getGEO(i)
      file <- Table(data)
      file1 <- select(file, -ID_REF)
      new <- cbind(new, file1)
    }, error = function(e) {
      flag<<-FALSE
    })
  }
  if(!flag) {
    next
}
  val <- val + 1
  print(val)
}
val <- 1
for (i in control) {
    flag <- TRUE
    tryCatch({
      data <- getGEO(i)
      file <- Table(data)
      file1 <- select(file, -ID_REF)
      new <- cbind(new, file1)
    }, error = function(e) {
      flag<<-FALSE
    })
  if(!flag) {
    next
}
  val <- val + 1
  print(val)
}

write.csv(new, "final.csv")
print("Done")
